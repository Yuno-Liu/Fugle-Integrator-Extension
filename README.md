# 富果整合器 - 產業鏈全視圖 (Fugle Integrator)

這是一個用於增強 [富果 Fugle](https://www.fugle.tw/) 網站功能的工具，旨在整合外部數據並優化使用者介面，讓投資者能更快速地掌握個股的產業鏈地位、機構評等與關鍵財務指標。

本專案提供 **Chrome 擴充功能 (Chrome Extension)** 供使用者安裝。

## ✨ 主要功能

-   **自動整合外部數據**：自動抓取並顯示產業鏈、概念股、集團股、營收、股本等資訊。
-   **相關個股推薦**：
    -   基於同產業、同概念、同集團自動推薦相關個股
    -   點擊相關個股可直接跳轉至對應的富果頁面。
-   **公司互動關係全視圖**：
    -   供應商、客戶、競爭對手、策略聯盟
    -   轉投資、被投資關係
    -   點擊關係企業可直接跳轉至對應的富果頁面。
-   **機構評等彙整**：
    -   顯示近 6 個月內的機構評等、目標價。
    -   自動計算目標價的最高、最低與平均值，並顯示與當前股價的乖離率。
-   **關鍵財務指標儀表板**：
    -   每股淨值 (BVPS)、股價淨值比 (PB)
    -   每股盈餘 (EPS)、本益比 (PE)
    -   殖利率、毛利率、ROE、ROA
    -   市值計算 (自動換算為億或兆)
    -   市場排名指標 (將個股指標與全市場比較，顯示排名百分比)
-   **主力買賣超分析**：
    -   顯示 1 日、5 日、10 日、20 日主力買賣超數據
    -   快速掌握法人資金動向
-   **成交量數據**：
    -   整合最近 20 天的成交量數據視圖
    -   支援自訂 API Token (finmindtrade) 以便抓取完整數據
    -   可在擴充功能 UI 中設定 Token，持久化存儲於 localStorage
-   **ETF 持股分析**：
    -   顯示該股票被哪些 ETF 持有
    -   直接跳轉至 ETF 詳細資訊頁面
-   **產能分析**：
    -   顯示公司工廠位置、生產規格與數量
    -   幫助了解產能布局與規模
-   **即時時間顯示**：
    -   股票代碼下方自動顯示當前時間（精確到秒）
    -   可懸停查看完整日期與星期
-   **便捷分析工具列**：
    -   **全方位搜尋**：支援搜尋股票代號、名稱、概念股、產業與集團，並可直接跳轉。
    -   一鍵跳轉至 WantGoo (玩股網)、CMoney、TradingView、富邦證券 (法人/主力)、Gemini AI 分析。
    -   **API Token 設定**：可直接在 UI 中設定成交量 API Token。
-   **UI 優化與自定義**：
    -   **資訊卡片**：整合上述所有資訊於一張卡片中，支援展開/收合。
    -   **位置切換**：可將資訊卡片切換為「靠右」、「靠左」懸浮或「預設」嵌入模式。
    -   **獨立視窗**：支援將資訊卡片彈出至獨立視窗，方便多螢幕使用者。
    -   **顯示開關**：可隨時隱藏或顯示資訊卡片。
    -   **分組摺疊**：各資訊區塊可獨立展開/摺疊，狀態自動保存。

## 🚀 安裝說明

### Chrome 擴充功能

1.  下載本專案的 `ChromeExtension` 資料夾。
2.  開啟 Chrome 瀏覽器，進入「擴充功能」管理頁面 (`chrome://extensions/`)。
3.  開啟右上角的「開發人員模式」。
4.  點擊左上角的「載入未封裝項目」。
5.  選擇 `ChromeExtension` 資料夾即可完成安裝。

### 選用功能：Gemini 自動填入提示詞

本專案包含一個額外的功能模組，用於配合富果整合器中的「Gemini」按鈕使用。
當您點擊富果頁面上的「Gemini」按鈕時，會開啟 Gemini 頁面並帶入股票代號與名稱。此功能會自動讀取網址參數並填入對話框送出，省去手動輸入的步驟。

**Chrome 擴充功能安裝步驟：**

1.  下載本專案的 `ChromeExtension/GeminiUrlPrompt` 資料夾。
2.  開啟 Chrome 瀏覽器，進入「擴充功能」管理頁面 (`chrome://extensions/`)。
3.  開啟右上角的「開發人員模式」。
4.  點擊左上角的「載入未封裝項目」。
5.  選擇 `ChromeExtension/GeminiUrlPrompt` 資料夾即可完成安裝。

## 📖 使用說明

1.  安裝完成後，前往 [富果 Fugle](https://www.fugle.tw/) 網站並進入任一個股頁面 (例如：台積電 2330)。
2.  頁面載入後，您會在股票名稱與價格資訊附近看到新增的「資訊卡片」與「工具按鈕組」。
3.  **資訊卡片**：顯示詳細的財務與產業資訊，點擊標題列可收合/展開。
4.  **工具按鈕**：
    -   點擊 `🔍 搜尋` 可開啟搜尋視窗，輸入關鍵字（如 "AI"、"2330"、"長榮"）即可快速查找個股或分類。
    -   點擊分析網站按鈕可開新分頁查詢。
    -   點擊位置按鈕 (如 `➡️ 靠右`) 可切換卡片顯示位置。
    -   點擊 `❐ 彈出` 可將卡片開啟於獨立視窗。
    -   使用滑動開關可暫時隱藏資訊卡片。

## 🔑 成交量 API Token 配置

**成交量數據** 需要自行配置 finmindtrade API Token，以下為配置步驟：

### 配置原因

-   **數據隱私與安全**：避免將真實 Token 硬編碼在開源代碼中，防止濫用
-   **用戶自主性**：允許每位使用者使用自己的 finmindtrade 帳戶與 Token
-   **API 限額管理**：不同的 Token 有各自的 API 請求額度，共享 Token 會導致額度迅速耗盡，影響所有使用者

### 配置步驟

1.  **申請免費帳戶**：

    -   前往 [finmindtrade.com](https://finmindtrade.com) 註冊免費帳戶
    -   登入後進入 API 管理頁面，複製您的 API Token

2.  **在擴充功能中設定 Token**：

    -   在富果頁面上，點擊工具列中的 **⚙️ 設定 Token** 按鈕
    -   將複製的 Token 貼入彈出的設置窗口
    -   點擊 **保存 Token** 即可

3.  **驗證配置**：
    -   Token 會自動保存至瀏覽器 localStorage
    -   後續訪問富果時，成交量數據會自動使用已保存的 Token 進行加載
    -   如需修改 Token，重複以上步驟即可

### 常見問題

-   **沒有看到 Token 設置按鈕？**

    -   請確認擴充功能已正確安裝，並重新整理富果頁面
    -   檢查瀏覽器開發者工具 (F12) 是否有錯誤訊息

-   **Token 設置後仍無法加載成交量？**

    -   確認 Token 格式正確（通常為 32-64 個英數字符）
    -   檢查網路連線與 finmindtrade API 服務是否可用
    -   查看瀏覽器開發者工具的 Network 標籤，確認 API 請求是否成功

-   **想重置為默認設置？**
    -   在 Token 設置窗口點擊 **使用默認** 按鈕即可

## 📊 資訊來源

本工具整合之數據主要來自公開網路資訊，包括但不限於：

-   **玉山證券 (E.SUN Securities)**：提供產業鏈、概念股、集團股、機構評等、關鍵財務指標、產能數據等。
-   **FindBillion (股海尋寶)**：提供 ETF 持股分析與相關數據。
-   **富果 (Fugle)**：提供基礎股價與個股頁面框架。
-   **其他分析網站**：WantGoo、CMoney、TradingView、富邦證券等 (僅提供快速連結)。

## ⚠️ 免責聲明

-   本工具僅供個人研究與學術交流使用，**不構成任何投資建議**。
-   所有數據來源均為公開網路資訊，本工具僅進行彙整與顯示優化，不保證數據的即時性與準確性。
-   投資有風險，使用者應自行判斷並承擔風險。

## 📜 授權

本專案採用 **MIT 授權** (MIT License)。詳見 [LICENSE](LICENSE) 文件。
